<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Load data #  For demonstration purposes we use the prostate cancer data set, which has been widely applied to demonstrate the lasso and related techniques.
To load prostate cancer data:
. insheet using /// https://web.stanford.edu/~hastie/ElemStatLearn/datasets/prostate.data, /// clear tab  General demonstration #  By default, lasso2 uses the lasso estimator (i.e., alpha(1)). Like Stata&rsquo;s regress, lasso2 expects the dependent variable to be named first followed by a list of predictors.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Getting started" />
<meta property="og:description" content="Load data #  For demonstration purposes we use the prostate cancer data set, which has been widely applied to demonstrate the lasso and related techniques.
To load prostate cancer data:
. insheet using /// https://web.stanford.edu/~hastie/ElemStatLearn/datasets/prostate.data, /// clear tab  General demonstration #  By default, lasso2 uses the lasso estimator (i.e., alpha(1)). Like Stata&rsquo;s regress, lasso2 expects the dependent variable to be named first followed by a list of predictors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://statalasso.github.io/docs/lassopack/lasso2/" /><meta property="article:section" content="docs" />



<title>Getting started | Stata ML Page</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.faa17d5e23166cd4e013165a396fc44278cb9136b0672f68e8ff906d4e5b956b.css" integrity="sha256-&#43;qF9XiMWbNTgExZaOW/EQnjLkTawZy9o6P&#43;QbU5blWs=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.c724703ab72456aa0d4e7994f9e868d4abf7c18f6506f9c479bd0ef611a0510b.js" integrity="sha256-xyRwOrckVqoNTnmU&#43;eho1Kv3wY9lBvnEeb0O9hGgUQs=" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-126129436-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Stata ML Page</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-a28c195407e662cdbffd5df0c1ccdd3c" class="toggle" checked />
    <label for="section-a28c195407e662cdbffd5df0c1ccdd3c" class="flex justify-between">
      <a href="https://statalasso.github.io/docs/lassopack/" class="">LASSOPACK</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/package_overview/" class="">Package overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/estimators/" class="">Estimation methods</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/regularized_reg/" class="">Regularized regression</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/lasso2/" class=" active">Getting started</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/cvlasso/" class="">Cross-validation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/rlasso/" class="">Rigorous lasso</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7b22f9a619ffc04f2040b80267ff8ec1" class="toggle"  />
    <label for="section-7b22f9a619ffc04f2040b80267ff8ec1" class="flex justify-between">
      <a href="https://statalasso.github.io/docs/lassopack/lassologit/" class="">Lassologit</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/lassologit/lassologit_demo/" class="">Example using Spam data</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/lasso2_replication/" class="">Comparison glmnet</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-de33cd2a5faa36dd8a4f9fdad33eadc5" class="toggle"  />
    <label for="section-de33cd2a5faa36dd8a4f9fdad33eadc5" class="flex justify-between">
      <a role="button" class="">Help files</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/help/lasso2_help/" class="">help lasso2</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/help/cvlasso_help/" class="">help cvlasso</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/help/rlasso_help/" class="">help  rlasso</a>
  

        </li>
      
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/installation/" class="">Installation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/lassopack/lassopack_cite/" class="">Citation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-1660971b512dcfeb0bcc54343ae1329f" class="toggle"  />
    <label for="section-1660971b512dcfeb0bcc54343ae1329f" class="flex justify-between">
      <a href="https://statalasso.github.io/docs/pdslasso/" class="">PDSLASSO</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pdslasso/pdslasso_models/" class="">Models</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pdslasso/pdslasso_demo/" class="">Demonstration</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pdslasso/pdslasso_panel/" class="">Panel FE</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pdslasso/ivlasso_help/" class="">Help file</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pdslasso/installation/" class="">Installation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pdslasso/pdslasso_cite/" class="">Citation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-a6d0313d37b86997de2e3c697c4d2888" class="toggle"  />
    <label for="section-a6d0313d37b86997de2e3c697c4d2888" class="flex justify-between">
      <a href="https://statalasso.github.io/docs/pystacked/" class="">PYSTACKED</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pystacked/getting_started/" class="">Getting started</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pystacked/regression/" class="">Regression</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pystacked/classification/" class="">Classification</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pystacked/parallel/" class="">Parallelization</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pystacked/help/" class="">Help file</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pystacked/installation/" class="">Installation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/pystacked/citation/" class="">Citation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/about/" class="">About</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://statalasso.github.io/docs/papers/" class="">Paper</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Getting started</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#load-data">Load data</a></li>
    <li><a href="#general-demonstration">General demonstration</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h2 id="load-data">
  Load data
  <a class="anchor" href="#load-data">#</a>
</h2>
<p>For demonstration purposes we use the <a href="/docs/prostate_data/">prostate cancer data set</a>,
which has been widely applied to demonstrate the lasso and related techniques.</p>
<p>To load prostate cancer data:</p>
<pre><code>. insheet using ///
    https://web.stanford.edu/~hastie/ElemStatLearn/datasets/prostate.data,  ///
    clear tab
</code></pre>
<h2 id="general-demonstration">
  General demonstration
  <a class="anchor" href="#general-demonstration">#</a>
</h2>
<p>By default, <code>lasso2</code> uses the lasso estimator (i.e., <code>alpha(1)</code>). Like Stata&rsquo;s <code>regress</code>,
<code>lasso2</code> expects the dependent variable to be named first followed
by a list of predictors.</p>
<pre><code>. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45

  Knot|  ID     Lambda    s      L1-Norm        EBIC     R-sq   | Entered/removed
------+---------------------------------------------------------+----------------
     1|   1  163.62492     1     0.00000     31.41226   0.0000  | Added _cons.
     2|   2  149.08894     2     0.06390     26.66962   0.0916  | Added lcavol.
     3|   9   77.73509     3     0.40800    -12.63533   0.4221  | Added svi.
     4|  11   64.53704     4     0.60174    -18.31145   0.4801  | Added lweight.
     5|  21   25.45474     5     1.35340    -42.20238   0.6123  | Added pgg45.
     6|  22   23.19341     6     1.39138    -38.93672   0.6175  | Added lbph.
     7|  29   12.09306     7     1.58269    -39.94418   0.6389  | Added age.
     8|  35    6.92010     8     1.71689    -38.84649   0.6516  | Added gleason.
     9|  41    3.95993     9     1.83346    -35.69248   0.6567  | Added lcp.
Use 'long' option for full output. Type e.g. 'lasso2, lic(ebic)' to run the model selected by EBIC.
</code></pre>
<p><code>lasso2</code> obtains the solution for a list of <span>
  \(\lambda&lt;span&gt;
  \( values (see third column). 
As &amp;lt;span&amp;gt;
  \(\lambda&amp;amp;lt;span&amp;amp;gt;
  \( decreases, predictors are added to the model. The last column on the right 
indicates which predictors enter or leave the active set. 

## Plotting

We can plot the *coefficient path* using `plotpath()`. The option accepts `lnlambda`,
`lambda` and `norm`, which asks Stata to plot the coefficient estimates
against &amp;amp;amp;lt;span&amp;amp;amp;gt;
  \(\ln\lambda&amp;amp;amp;amp;lt;span&amp;amp;amp;amp;gt;
  \(, &amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;gt;
  \(\lambda&amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;gt;
  \( or the &amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;gt;
  \(\ell_1&amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(-norm, respectively.

For example, to plot the coefficients against &amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\ln\lambda&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(:

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
	         plotpath(lnlambda) ///
	         plotopt(legend(off)) ///
	         plotlabel

`plotopt()` allows to specify additional plotting options that are passed on to
Stata&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#39;s `line` command. In the example, `legend(off)` is used to suppress the legend. 
`plotlabel` triggers the display of variable labels next to the line.

The resulting graph looks as follows:

![](/img/plotpath.png#center)

To plot the coefficients against the &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\ell_1&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(-norm, we can use:

	. lasso2, plotpath(norm) ///
		  plotlabel ///
		  plotopt(legend(off))

By omitting the variable names (before the comma), 
we make use of the *replay syntax*. 
`lasso2` uses the previous `lasso2` results 
which avoids time-consuming re-estimation.
This only works if `lasso2` results are in memory.

This creates the following graph:

![]({&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;/img/plotpath_norm.png#center)

## The lambda() option

We can use the `lambda()` option to estimate the model that
corresponds to a specific value of 
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;link rel=&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;stylesheet&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34; href=&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;/katex/katex.min.css&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34; /&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;script defer src=&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;/katex/katex.min.js&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/script&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;script defer src=&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;/katex/auto-render.min.js&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34; onload=&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;renderMathInElement(document.body);&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/script&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\lambda\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
. 

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
		 lambda(10)

	---------------------------------------------------
		 Selected |           Lasso   Post-est OLS
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		   lcavol |       0.5000819      0.5234981
		  lweight |       0.5144276      0.6152349
		      age |      -0.0036627     -0.0190343
		     lbph |       0.0468469      0.0954908
		      svi |       0.5695171      0.6358643
		    pgg45 |       0.0017981      0.0035248
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
	   Partialled-out*|
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		    _cons |      -0.0014767      0.5214696
	---------------------------------------------------

The output shows the lasso and post-estimation OLS estimates
corresponding to &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\lambda=10\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
.
However, note that there is no justification for using &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\lambda=10\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;

over any other positive value. To pick the &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;optimal&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34; value for &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\lambda\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
, 
we can use cross-validation (see `cvlasso`), theory-driven
penalization (`rlasso`) or information criteria as discussed below. 

## Estimators 

The default estimator of `lasso2` is the lasso, which corresponds to `alpha(1)`. 
The `alpha()` option controls the elastic net parameter, which determines
the relative contribution of &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\ell_1\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
 (lasso-type) to &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\ell_2\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
 (ridge-type) penalization.

For ridge regression, use `alpha(0)`:

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
	         alpha(0) ///
		 lambda(500)
	---------------------------------------------------
		 Selected |           Ridge   Post-est OLS
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		   lcavol |       0.1497346      0.5643413
		  lweight |       0.2497274      0.6220198
		      age |       0.0016636     -0.0212482
		     lbph |       0.0294061      0.0967125
		      svi |       0.2913161      0.7616733
		      lcp |       0.0687956     -0.1060509
		  gleason |       0.0771692      0.0492279
		    pgg45 |       0.0023278      0.0044575
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
	   Partialled-out*|
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		    _cons |       0.6322244      0.1815609
	---------------------------------------------------


In contrast to the lasso, the ridge includes all predictors in the model. 
It does not perform variable selection, even if &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\lambda\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
 is large,
whereas the elastic net can 
yield sparse solutions even when &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\alpha\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
 is small:

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
	         alpha(0.1) ///
		 lambda(500)
	---------------------------------------------------
		 Selected |     Elastic net   Post-est OLS
		          |   (alpha=0.100)
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		   lcavol |       0.1222143      0.5378499
		  lweight |       0.1236962      0.6620155
		      svi |       0.1854247      0.6991923
		      lcp |       0.0424339     -0.0813594
		  gleason |       0.0116789      0.0322875
		    pgg45 |       0.0008686      0.0036868
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
	   Partialled-out*|
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		    _cons |       1.7319371     -1.1240093
	---------------------------------------------------


Lastly, to employ square-root lasso, use the `sqrt` option:

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
	         sqrt ///
		 lambda(20)

Note that the `alpha()` and `sqrt` option are incompatible.

## Information criteria

To select the &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34;best&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#34; value of lambda, 
`lasso2` offers four information criteria: 
- Akaike Information Criterion (&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(AIC\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
),
- Bayesian Information Criterion (&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(BIC\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
),
- Extended Bayesian Information Criterion (&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(EBIC\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
) 
- and Corrected Akaike Information Criterion (&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(AICc\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
)

By default, the &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(EBIC\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
 is shown in the output.

To estimate the model corresponding to the minimum information criterion, the 
`lic()` is used which accepts `aic`, `bic`, `ebic` and `aicc`. `lic()` can 
either be specified in the first `lasso2` call or using the replay syntax 
(to avoid re-estimation).

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
		 lic(aic)
	
The same can be achieved in two steps using the replay syntax:

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45
	. lasso2, lic(aic)

	Use lambda=7.594796178345335 (selected by AIC).

	---------------------------------------------------
		 Selected |           Lasso   Post-est OLS
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		   lcavol |       0.5057140      0.5234981
		  lweight |       0.5386738      0.6152349
		      age |      -0.0073599     -0.0190343
		     lbph |       0.0585468      0.0954908
		      svi |       0.5854749      0.6358643
		    pgg45 |       0.0022134      0.0035248
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
	   Partialled-out*|
	------------------&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;#43;--------------------------------
		    _cons |       0.1243026      0.5214696
	---------------------------------------------------

As indicated in the output, the AIC selects `lambda=7.59`.

## Predicted values

The `predict` post-estimation command allows to return residuals and predicted values. 
In the output below, `xbhat1` is generated by re-estimating the model for &amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\lambda=10\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
.
The `noisily` option triggers the display of the estimation results.
`xbhat2` is generated by linear approximation using the two beta estimates closest to `lambda=10`.

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45
	. cap drop xbhat1
	. predict double xbhat1, xb l(10) noisily
	. cap drop xbhat2
	. predict double xbhat2, xb l(10) approx

Alternatively, we can explicitly run the model using `lambda(10)`.  If `lasso2` is called with a scalar
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
  \(\lambda\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;
 value, the subsequent `predict` command requires no `lambda()` option.

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
		 lambda(10)
	. cap drop xbhat3
	. predict double xbhat3, xb

All three methods yield the same results.  However note that the linear approximation
is only exact for the lasso which is piecewise linear.

## Adaptive lasso

The adaptive lasso relies on an initial estimator to calculate the penalty loadings.
 By default, `lasso2` uses OLS as the initial
estimator as originally suggested by Zou (2006).  If the number of parameters exceeds
the numbers of observations, univariate OLS is used; see Huang et al. (2008).

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
	         adaptive
	. mat list e(Ups)

See the OLS estimates for comparison.

	. reg lpsa lcavol lweight age lbph svi lcp gleason pgg45

Other initial estimators such as ridge regression are possible.

	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, ///
		 l(10) alpha(0)
	. mat bhat_ridge = e(b)
	. lasso2 lpsa lcavol lweight age lbph svi lcp gleason pgg45, 
		 adaptive adaloadings(bhat_ridge)
	. mat list e(Ups)

## More

Please check the help file for more information and examples.

	. help lasso2\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;amp;gt;\)
&amp;amp;amp;amp;lt;/span&amp;amp;amp;amp;gt;\)
&amp;amp;amp;lt;/span&amp;amp;amp;gt;\)
&amp;amp;lt;/span&amp;amp;gt;\)
&amp;lt;/span&amp;gt;\)
&lt;/span&gt;\)
</span>
</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#load-data">Load data</a></li>
    <li><a href="#general-demonstration">General demonstration</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












