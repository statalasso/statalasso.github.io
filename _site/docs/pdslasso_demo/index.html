<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.11.1 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Demonstration using AJR - The Stata Lasso Page</title>
<meta name="description" content="The Stata Lasso Page.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="The Stata Lasso Page">
<meta property="og:title" content="Demonstration using AJR">
<meta property="og:url" content="http://localhost:4000/docs/pdslasso_demo/">












  

  


<link rel="canonical" href="http://localhost:4000/docs/pdslasso_demo/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Achim Ahrens",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="The Stata Lasso Page Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">The Stata Lasso Page</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/" >Home</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/installation/" >Installation</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/slides/" >Slides</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/papers/" >Working paper</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/about/" >About</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/references/" >References</a>
            </li>
          
        </ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">lassopack</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/docs/lassopack/" class="">Overview</a></li>
          
            
            

            
            

            <li><a href="/docs/regularized_reg/" class="">Regularized regression</a></li>
          
            
            

            
            

            <li><a href="/docs/estimators/" class="">Estimation methods</a></li>
          
            
            

            
            

            <li><a href="/docs/lasso2/" class="">Getting started (lasso2)</a></li>
          
            
            

            
            

            <li><a href="/docs/cvlasso/" class="">Cross-validation (cvlasso)</a></li>
          
            
            

            
            

            <li><a href="/docs/rlasso/" class="">Rigorous lasso (rlasso)</a></li>
          
            
            

            
            

            <li><a href="/docs/lasso2_help/" class="">Help lasso2</a></li>
          
            
            

            
            

            <li><a href="/docs/cvlasso_help/" class="">Help cvlasso</a></li>
          
            
            

            
            

            <li><a href="/docs/rlasso_help/" class="">Help rlasso</a></li>
          
            
            

            
            

            <li><a href="/docs/lassopack_cite/" class="">Citation</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">pdslasso</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/docs/pdslasso/" class="">Overview</a></li>
          
            
            

            
            

            <li><a href="/docs/pdslasso_models/" class="">Models</a></li>
          
            
            

            
            

            <li><a href="/docs/pdslasso_demo/" class="active">Demonstration</a></li>
          
            
            

            
            

            <li><a href="/docs/ivlasso_help/" class="">Help file</a></li>
          
            
            

            
            

            <li><a href="/docs/pdslasso_cite/" class="">Citation</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">lassologit</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/docs/lassologit/" class="">Overview</a></li>
          
            
            

            
            

            <li><a href="/docs/lassologit_demo/" class="">Demonstration</a></li>
          
            
            

            
            

            <li><a href="/docs/lassologit_help/" class="">Help file</a></li>
          
            
            

            
            

            <li><a href="/docs/lassologit_cite/" class="">Citation</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Demonstration using AJR">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Demonstration using AJR
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <script type="text/javascript" async="" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<p>We demonstrate the use of <code class="highlighter-rouge">pdslasso</code>
and <code class="highlighter-rouge">ivlasso</code> using the famous data set of 
Acemoglu, Robinson &amp; Johnson (<a href="https://economics.mit.edu/files/4123">2001</a>).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. clear
. use https://statalasso.github.io/dta/AJR.dta
</code></pre></div></div>

<h2 id="basic-ols">Basic OLS</h2>

<p>We are interested in the effect of institutions (measured by <code class="highlighter-rouge">avexpr</code>)
on income (<code class="highlighter-rouge">logpgp95</code>). We ignore endogeneity issues for now
and begin with a simple regression of <code class="highlighter-rouge">logpgp95</code>
against <code class="highlighter-rouge">avexpr</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. reg logpgp95 avexpr

      Source |       SS           df       MS      Number of obs   =        64
-------------+----------------------------------   F(1, 62)        =     72.82
       Model |  37.0420118         1  37.0420118   Prob &gt; F        =    0.0000
    Residual |  31.5397067        62  .508704946   R-squared       =    0.5401
-------------+----------------------------------   Adj R-squared   =    0.5327
       Total |  68.5817185        63  1.08859871   Root MSE        =    .71324

------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |    .522107    .061185     8.53   0.000     .3997999    .6444142
       _cons |   4.660383   .4085062    11.41   0.000     3.843791    5.476976
------------------------------------------------------------------------------
</code></pre></div></div>

<h2 id="exogenous-regressors-and-many-controls">Exogenous regressors and many controls</h2>

<p>We have 24 control variables that control for
geography (latitude, continent dummies). This doesn’t seem a lot, but 
we only have 64 observations! At the same time, we are only interested in 
<code class="highlighter-rouge">avexpr</code>. The problem is that the “right” set of controls is not known – 
use too few controls, or the wrong ones, and omitted variable bias will be present;
use too many, and the model will suffer from overfitting.
So, we treat the remaining variables as high-dimensional controls by
placing them into parentheses and let the lasso decide which controls are important.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. pdslasso logpgp95 avexpr (lat_abst edes1975 avelf temp* humid* steplow-oilres)

OLS using CHS lasso-orthogonalized vars
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   .4262511   .0540552     7.89   0.000     .3203049    .5321974
------------------------------------------------------------------------------

OLS using CHS post-lasso-orthogonalized vars
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |    .391257   .0574894     6.81   0.000     .2785799     .503934
------------------------------------------------------------------------------

OLS with PDS-selected variables and full regressor set
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   .3913455   .0561862     6.97   0.000     .2812225    .5014684
    edes1975 |   .0091289    .003184     2.87   0.004     .0028883    .0153694
       avelf |  -.9974943   .2474453    -4.03   0.000    -1.482478   -.5125104
        zinc |  -.0079226   .0280604    -0.28   0.778    -.0629201    .0470748
       _cons |   5.764133   .3773706    15.27   0.000     5.024501    6.503766
------------------------------------------------------------------------------
</code></pre></div></div>

<p>Three different estimation results are presented, which correspond to three different approaches:</p>

<ul>
  <li><em>post-regularization with the lasso:</em> (1) we obtain the lasso residuals from regressing <code class="highlighter-rouge">logpgp95</code>
 against the set of controls; (2) we obtain the lasso residuals from regressing <code class="highlighter-rouge">avexpr</code>
 against the set of controls; (3) OLS regression using the orthogonalized versions
 of <code class="highlighter-rouge">logpgp95</code> and <code class="highlighter-rouge">avexpr</code>.</li>
  <li><em>post-regularization with the post-lasso:</em> same as above but using post-lasso residuals
instead lasso residuals.</li>
  <li><em>post-double-selection:</em> OLS of <code class="highlighter-rouge">logpgp95</code> against <code class="highlighter-rouge">avexpr</code> and the set of controls
selected in regression (1) and (2).</li>
</ul>

<p>All three approaches are valid.</p>

<h2 id="endogenous-regressor-and-all-controls">Endogenous regressor and all controls</h2>

<p>Since the relationship between income and institutions suffers from reverse causality, 
we use settler mortality (<code class="highlighter-rouge">logem4</code>) as an instrument as suggested by Acemoglu et al.
The rationale for using <code class="highlighter-rouge">logem4</code> is that disease environment
(malaria, yellow fever, etc.) is exogenous because diseases were
almost always fatal to settlers (no immunity), but less serious
for natives (some degree of immunity).</p>

<p>We also need to control for other highly persistent factors
that are related to institutions &amp; GDP. 
For now, we include <em>all</em> control variables:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.  pdslasso logpgp95 lat_abst edes1975 avelf temp* humid* steplow-oilres (avexpr=logem4)

IV using CHS lasso-orthogonalized vars
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   1.174461   .3166948     3.71   0.000     .5537506    1.795172
... (output omitted)
------------------------------------------------------------------------------

IV using CHS post-lasso-orthogonalized vars
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   1.065556   .2492286     4.28   0.000     .5770768    1.554035
... (output omitted)
------------------------------------------------------------------------------

IV with PDS-selected variables and full regressor set
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   .7126678   .1649034     4.32   0.000      .389463    1.035873
... (output omitted)
------------------------------------------------------------------------------
</code></pre></div></div>

<h2 id="selected-instruments-and-selected-controls">Selected instruments and selected controls:</h2>

<p>Inclusing all controls seems inefficient. Thus, we use the lasso to select
controls in the IV regression. To this end, we place our high-dimensional controls
in parantheses as above.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>. ivlasso logpgp95  (lat_abst edes1975 avelf temp* humid* steplow-oilres) (avexpr=logem4)

IV using CHS lasso-orthogonalized vars
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   .7710621   .1502209     5.13   0.000     .4766344     1.06549
------------------------------------------------------------------------------

IV using CHS post-lasso-orthogonalized vars
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   .8798503   .2727401     3.23   0.001     .3452896    1.414411
------------------------------------------------------------------------------

IV with PDS-selected variables and full regressor set
------------------------------------------------------------------------------
    logpgp95 |      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      avexpr |   .8413527   .2487658     3.38   0.001     .3537807    1.328925
    edes1975 |   .0019949   .0058535     0.34   0.733    -.0094777    .0134675
       avelf |  -.8777934   .3557117    -2.47   0.014    -1.574975   -.1806113
        zinc |  -.0739391   .0526534    -1.40   0.160    -.1771378    .0292597
       _cons |   2.975816   1.555107     1.91   0.056    -.0721371     6.02377
------------------------------------------------------------------------------
</code></pre></div></div>

<h2 id="more">More</h2>

<p>More information can be found in the help file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>help ivlasso
help pdslasso
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>
    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
    
    
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Achim Ahrens. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.9/js/all.js"></script>








  </body>
</html>